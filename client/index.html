<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>RPS Arena</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <!-- Mobile Block Screen -->
  <div id="mobile-block" class="screen hidden">
    <div class="mobile-message">
      <h1>RPS Arena</h1>
      <p>RPS Arena is designed for desktop.</p>
      <p>Please visit on a computer.</p>
    </div>
  </div>

  <!-- Landing Screen -->
  <div id="landing-screen" class="screen">
    <canvas id="landing-bg-canvas"></canvas>
    <div class="landing-content">
      <h1 class="logo">RPS ARENA</h1>
      <p class="tagline">Eliminate. Collect. Win.</p>
      <button id="connect-wallet-btn" class="btn btn-primary">Connect Wallet</button>
      <button id="how-to-play-btn" class="btn btn-secondary how-to-play-landing-btn">How to Play</button>
      <p class="network-info">Powered by Base</p>
      <a href="docs.html" class="docs-link">Technical Documentation</a>
    </div>
  </div>

  <!-- Lobby Browser Screen -->
  <div id="lobby-screen" class="screen hidden">
    <!-- Animated RPS Background -->
    <canvas id="lobby-bg-canvas"></canvas>
    <header class="lobby-header">
      <h2>RPS ARENA</h2>
      <nav class="nav-tabs">
        <button id="nav-lobbies" class="nav-tab active">Lobbies</button>
        <button id="nav-how-to-play" class="nav-tab">How to Play</button>
        <button id="nav-leaderboard" class="nav-tab">Leaderboard</button>
        <button id="nav-profile" class="nav-tab">Profile</button>
      </nav>
      <div class="user-info">
        <span id="user-display"></span>
        <button id="disconnect-btn" class="btn btn-link">Disconnect</button>
      </div>
    </header>

    <!-- Lobbies Tab Content -->
    <div id="lobbies-tab" class="tab-content">
      <div class="lobby-content">
        <!-- Tutorial Banner -->
        <div class="tutorial-banner">
          <div class="tutorial-banner-content">
            <div class="tutorial-banner-text">
              <span class="tutorial-banner-icon">üéÆ</span>
              <div>
                <strong>New to RPS Arena?</strong>
                <p>Try our free practice mode to learn the game mechanics!</p>
              </div>
            </div>
            <button id="start-tutorial-btn" class="btn btn-primary tutorial-btn">Start Tutorial</button>
          </div>
        </div>

        <h3>Select a Lobby</h3>
        <div id="lobby-list" class="lobby-list">
          <!-- Lobbies populated by JS -->
        </div>
      </div>
    </div>

    <!-- How to Play Tab Content -->
    <div id="how-to-play-tab" class="tab-content hidden">
      <div class="how-to-play-content">
        <h3>How to Play</h3>

        <!-- Interactive Tutorial Banner -->
        <div class="tutorial-promo-box">
          <div class="tutorial-promo-content">
            <strong>Learn by Doing!</strong>
            <p>Try our free interactive tutorial to practice all game mechanics before playing for real.</p>
          </div>
          <button id="how-to-play-tutorial-btn" class="btn btn-primary">Start Tutorial</button>
        </div>

        <!-- Quick Start -->
        <section class="guide-section">
          <h4>Quick Start</h4>
          <div class="quick-start-steps">
            <div class="quick-step">
              <span class="step-number">1</span>
              <span class="step-text">Connect your wallet and pay 1 USDC to join a lobby</span>
            </div>
            <div class="quick-step">
              <span class="step-number">2</span>
              <span class="step-text">Wait for 3 players, then learn your role (Rock, Paper, or Scissors)</span>
            </div>
            <div class="quick-step">
              <span class="step-number">3</span>
              <span class="step-text">Move with WASD or Arrow Keys to chase or flee from opponents</span>
            </div>
            <div class="quick-step">
              <span class="step-number">4</span>
              <span class="step-text">Eliminate an opponent to trigger Showdown mode</span>
            </div>
            <div class="quick-step">
              <span class="step-number">5</span>
              <span class="step-text">Collect 2 hearts before your rival to win 2.4 USDC!</span>
            </div>
          </div>
        </section>

        <!-- Movement Controls -->
        <section class="guide-section">
          <h4>Movement Controls</h4>
          <div class="controls-grid">
            <div class="control-option">
              <div class="key-group">
                <span class="key">W</span>
                <div class="key-row">
                  <span class="key">A</span>
                  <span class="key">S</span>
                  <span class="key">D</span>
                </div>
              </div>
              <span class="control-label">WASD Keys</span>
            </div>
            <div class="control-divider">or</div>
            <div class="control-option">
              <div class="key-group">
                <span class="key arrow-key">‚Üë</span>
                <div class="key-row">
                  <span class="key arrow-key">‚Üê</span>
                  <span class="key arrow-key">‚Üì</span>
                  <span class="key arrow-key">‚Üí</span>
                </div>
              </div>
              <span class="control-label">Arrow Keys</span>
            </div>
          </div>
          <ul class="guide-list">
            <li>Move in any direction including diagonals</li>
            <li>All players move at the same speed</li>
            <li>You cannot leave the arena boundaries</li>
          </ul>
        </section>

        <!-- Rock Paper Scissors Rules -->
        <section class="guide-section">
          <h4>Rock Paper Scissors Combat</h4>
          <p class="guide-intro">Each match, you're assigned one of three roles. Players are color-coded in the arena. To eliminate an opponent, <strong>run directly into them with your player</strong> - if your role beats theirs, they're instantly eliminated!</p>
          <div class="rps-rules">
            <div class="rps-rule">
              <div class="rps-matchup">
                <span class="role-badge rock">Rock (Orange)</span>
                <span class="beats-arrow">beats</span>
                <span class="role-badge scissors">Scissors (Green)</span>
              </div>
            </div>
            <div class="rps-rule">
              <div class="rps-matchup">
                <span class="role-badge scissors">Scissors (Green)</span>
                <span class="beats-arrow">beats</span>
                <span class="role-badge paper">Paper (Blue)</span>
              </div>
            </div>
            <div class="rps-rule">
              <div class="rps-matchup">
                <span class="role-badge paper">Paper (Blue)</span>
                <span class="beats-arrow">beats</span>
                <span class="role-badge rock">Rock (Orange)</span>
              </div>
            </div>
          </div>
          <div class="combat-tips">
            <div class="tip">
              <span class="tip-icon attack">‚öî</span>
              <span><strong>Attack</strong> the role you beat for an instant elimination</span>
            </div>
            <div class="tip">
              <span class="tip-icon avoid">üõ°</span>
              <span><strong>Avoid</strong> the role that beats you or you'll be eliminated</span>
            </div>
          </div>
        </section>

        <!-- Showdown Mode -->
        <section class="guide-section showdown-section">
          <h4>Showdown Mode</h4>
          <div class="showdown-badge">Final 2 Players</div>
          <p class="guide-intro">When only 2 players remain, the game transitions to Showdown Mode!</p>
          <div class="showdown-details">
            <div class="showdown-step">
              <span class="showdown-icon">‚è∏</span>
              <div>
                <strong>3-Second Freeze</strong>
                <p>Both players freeze while "SHOWDOWN" appears on screen</p>
              </div>
            </div>
            <div class="showdown-step">
              <span class="showdown-icon">üíó</span>
              <div>
                <strong>Hearts Spawn</strong>
                <p>3 hearts appear at random positions in the arena</p>
              </div>
            </div>
            <div class="showdown-step">
              <span class="showdown-icon">üèÉ</span>
              <div>
                <strong>Race to Collect</strong>
                <p><strong>Move your player directly into the hearts</strong> to collect them - first player to collect <strong>2 hearts</strong> wins the match!</p>
              </div>
            </div>
          </div>
          <div class="showdown-note">
            <strong>Note:</strong> In Showdown Mode, collisions between players only cause a bounce - no eliminations!
          </div>
        </section>

        <!-- Game Objectives -->
        <section class="guide-section">
          <h4>How to Win</h4>
          <div class="win-conditions">
            <div class="win-condition">
              <div class="win-header">
                <span class="win-icon">üëë</span>
                <span class="win-title">Standard Victory</span>
              </div>
              <p>Be the last player standing by running into opponents whose role you beat to eliminate them</p>
            </div>
            <div class="win-condition">
              <div class="win-header">
                <span class="win-icon">üíó</span>
                <span class="win-title">Showdown Victory</span>
              </div>
              <p>If 2 players remain, race to collect hearts by running into them - first to collect 2 of the 3 hearts wins!</p>
            </div>
          </div>
        </section>

        <!-- Match Flow -->
        <section class="guide-section">
          <h4>Match Flow</h4>
          <div class="match-flow">
            <div class="flow-step">
              <div class="flow-number">1</div>
              <div class="flow-content">
                <strong>Join a Lobby</strong>
                <p>Pay 1 USDC to enter. Wait for 3 players total.</p>
              </div>
            </div>
            <div class="flow-arrow">‚Üí</div>
            <div class="flow-step">
              <div class="flow-number">2</div>
              <div class="flow-content">
                <strong>10-Second Countdown</strong>
                <p>Learn your role and see who to attack/avoid.</p>
              </div>
            </div>
            <div class="flow-arrow">‚Üí</div>
            <div class="flow-step">
              <div class="flow-number">3</div>
              <div class="flow-content">
                <strong>3-Second Preview</strong>
                <p>See player positions before the action begins.</p>
              </div>
            </div>
            <div class="flow-arrow">‚Üí</div>
            <div class="flow-step">
              <div class="flow-number">4</div>
              <div class="flow-content">
                <strong>Battle Phase</strong>
                <p>Chase your target, flee from your threat!</p>
              </div>
            </div>
            <div class="flow-arrow">‚Üí</div>
            <div class="flow-step">
              <div class="flow-number">5</div>
              <div class="flow-content">
                <strong>Showdown / Victory</strong>
                <p>Eliminate all or race for hearts to win!</p>
              </div>
            </div>
          </div>
        </section>

        <!-- Economy -->
        <section class="guide-section">
          <h4>Entry Fee & Prizes</h4>
          <div class="economy-table">
            <div class="economy-row">
              <span class="economy-label">Entry Fee</span>
              <span class="economy-value">1 USDC</span>
            </div>
            <div class="economy-row">
              <span class="economy-label">Prize Pool</span>
              <span class="economy-value">3 USDC (from 3 players)</span>
            </div>
            <div class="economy-row highlight">
              <span class="economy-label">Winner Payout</span>
              <span class="economy-value success">2.4 USDC</span>
            </div>
            <div class="economy-row">
              <span class="economy-label">Platform Fee</span>
              <span class="economy-value">0.6 USDC (20%)</span>
            </div>
          </div>
          <p class="economy-note">If a lobby doesn't fill within 30 minutes, you can request a full refund of your 1 USDC.</p>
        </section>

        <!-- Tips & Strategy -->
        <section class="guide-section">
          <h4>Tips & Strategy</h4>
          <div class="tips-grid">
            <div class="strategy-tip">
              <span class="strategy-icon">üéØ</span>
              <div>
                <strong>Know Your Matchups</strong>
                <p>During the countdown, memorize who you beat and who beats you.</p>
              </div>
            </div>
            <div class="strategy-tip">
              <span class="strategy-icon">‚è±</span>
              <div>
                <strong>Be Patient</strong>
                <p>Sometimes waiting for the right moment is better than rushing in.</p>
              </div>
            </div>
            <div class="strategy-tip">
              <span class="strategy-icon">üëÄ</span>
              <div>
                <strong>Watch All Players</strong>
                <p>Track your threat's position even while chasing your target.</p>
              </div>
            </div>
            <div class="strategy-tip">
              <span class="strategy-icon">üíó</span>
              <div>
                <strong>Showdown Positioning</strong>
                <p>In Showdown, position yourself near multiple hearts at once.</p>
              </div>
            </div>
            <div class="strategy-tip">
              <span class="strategy-icon">üö´</span>
              <div>
                <strong>Don't Disconnect</strong>
                <p>Stay connected! Disconnecting for 30+ seconds eliminates you.</p>
              </div>
            </div>
          </div>
        </section>

        <!-- FAQ -->
        <section class="guide-section">
          <h4>Frequently Asked Questions</h4>
          <div class="faq-list">
            <div class="faq-item">
              <div class="faq-question">Can I get a refund if I join a lobby?</div>
              <div class="faq-answer">Yes, but only if the match doesn't start within 30 minutes. Once a match begins, there are no refunds.</div>
            </div>
            <div class="faq-item">
              <div class="faq-question">What if I disconnect during a match?</div>
              <div class="faq-answer">You have 30 seconds to reconnect. If you don't return in time, you'll be automatically eliminated.</div>
            </div>
            <div class="faq-item">
              <div class="faq-question">How are roles assigned?</div>
              <div class="faq-answer">Roles are randomly assigned at the start of each match. Everyone has an equal chance of being Rock, Paper, or Scissors.</div>
            </div>
            <div class="faq-item">
              <div class="faq-question">Is there a maximum number of matches I can play?</div>
              <div class="faq-answer">No! Play as many matches as you want. Just join any available lobby.</div>
            </div>
          </div>
        </section>

      </div>
    </div>

    <!-- Leaderboard Tab Content -->
    <div id="leaderboard-tab" class="tab-content hidden">
      <div class="leaderboard-content">
        <div class="leaderboard-header">
          <h3>Top Players</h3>
          <div class="leaderboard-filters">
            <button id="filter-all" class="filter-btn active">All Time</button>
            <button id="filter-monthly" class="filter-btn">This Month</button>
            <button id="filter-weekly" class="filter-btn">This Week</button>
          </div>
        </div>
        <div id="leaderboard-list" class="leaderboard-list">
          <!-- Leaderboard populated by JS -->
        </div>
      </div>
    </div>

    <!-- Profile Tab Content -->
    <div id="profile-tab" class="tab-content hidden">
      <div class="profile-content">
        <div class="profile-header">
          <div class="profile-photo-container">
            <img id="profile-photo" src="" alt="Profile" class="profile-photo">
            <button id="change-photo-btn" class="btn btn-small hidden">Change Photo</button>
            <input type="file" id="photo-input" accept="image/*" class="hidden">
          </div>
          <div class="profile-info">
            <div class="username-container">
              <span id="profile-username" class="profile-username">-</span>
              <button id="edit-username-btn" class="btn btn-small hidden">Edit</button>
            </div>
            <span id="profile-wallet" class="profile-wallet">-</span>
          </div>
        </div>

        <div id="profile-no-matches" class="profile-notice hidden">
          <p>Complete a match to unlock profile customization!</p>
        </div>

        <div class="profile-stats">
          <div class="stat-card">
            <span class="stat-value" id="stat-matches">0</span>
            <span class="stat-label">Matches</span>
          </div>
          <div class="stat-card">
            <span class="stat-value" id="stat-wins">0</span>
            <span class="stat-label">Wins</span>
          </div>
          <div class="stat-card">
            <span class="stat-value" id="stat-winrate">0%</span>
            <span class="stat-label">Win Rate</span>
          </div>
          <div class="stat-card">
            <span class="stat-value" id="stat-profit">$0.00</span>
            <span class="stat-label">Net Profit</span>
          </div>
          <div class="stat-card">
            <span class="stat-value" id="stat-streak">0</span>
            <span class="stat-label">Best Streak</span>
          </div>
        </div>

        <div class="match-history">
          <h4>Recent Matches</h4>
          <div id="match-history-list" class="match-history-list">
            <!-- Match history populated by JS -->
          </div>
        </div>
      </div>
    </div>
    <div class="ping-display">Ping: <span id="ping-value">--</span>ms</div>
  </div>

  <!-- Waiting in Lobby Screen -->
  <div id="waiting-screen" class="screen hidden">
    <div class="waiting-content">
      <h2>Lobby #<span id="current-lobby-id">-</span></h2>
      <div id="player-slots" class="player-slots">
        <!-- Player slots populated by JS -->
      </div>
      <div class="lobby-timer">
        <span id="timeout-display">Waiting for players...</span>
      </div>
      <button id="refund-btn" class="btn btn-secondary hidden">Request Refund</button>
      <p class="waiting-warning">Once you join, your 1 USDC is committed until match starts or 30-minute timeout.</p>
    </div>
  </div>

  <!-- Match Countdown Screen -->
  <div id="countdown-screen" class="screen hidden">
    <canvas id="countdown-canvas"></canvas>
    <div class="countdown-overlay">
      <div id="countdown-number" class="countdown-number">10</div>
      <div id="role-tutorial" class="role-tutorial">
        <div class="tutorial-section you-are">
          <span class="tutorial-label">YOU ARE</span>
          <canvas id="your-role-icon" width="80" height="80"></canvas>
          <span id="your-role-name" class="role-name"></span>
        </div>
        <div class="tutorial-section attack">
          <span class="tutorial-label">ATTACK</span>
          <canvas id="attack-role-icon" width="80" height="80"></canvas>
          <span id="attack-role-name" class="role-name"></span>
        </div>
        <div class="tutorial-section avoid">
          <span class="tutorial-label">AVOID</span>
          <canvas id="avoid-role-icon" width="80" height="80"></canvas>
          <span id="avoid-role-name" class="role-name"></span>
        </div>
      </div>
    </div>
  </div>

  <!-- In-Game Screen -->
  <div id="game-screen" class="screen hidden">
    <canvas id="game-canvas"></canvas>
    <div class="game-ping">Ping: <span id="game-ping-value">--</span>ms</div>
    <!-- Get Ready Overlay (shown during 3-second preview) -->
    <div id="get-ready-overlay" class="get-ready-overlay hidden">
      <div class="get-ready-content">
        <div id="preview-countdown" class="preview-countdown">3</div>
        <div class="get-ready-text">GET READY</div>
      </div>
    </div>
  </div>

  <!-- Tutorial Screen -->
  <div id="tutorial-screen" class="screen hidden">
    <canvas id="tutorial-canvas"></canvas>

    <!-- Tutorial Instruction Overlay -->
    <div id="tutorial-instruction-overlay" class="tutorial-instruction-overlay">
      <div class="tutorial-instruction-box">
        <h3 id="tutorial-instruction-title">Welcome to RPS Arena!</h3>
        <p id="tutorial-instruction-text">Use WASD or Arrow Keys to move around the arena.</p>
        <p id="tutorial-instruction-subtext" class="tutorial-subtext">Move to any edge of the arena to continue.</p>
      </div>
    </div>

    <!-- Tutorial Exit Button -->
    <button id="tutorial-exit-btn" class="btn btn-secondary tutorial-exit-btn">Exit Tutorial</button>

    <!-- Tutorial Restart Button (always available) -->
    <button id="tutorial-restart-btn" class="btn btn-primary tutorial-restart-btn">Restart Tutorial</button>

    <!-- Tutorial Complete Overlay -->
    <div id="tutorial-complete-overlay" class="tutorial-complete-overlay hidden">
      <div class="tutorial-complete-box">
        <h2>Tutorial Complete!</h2>
        <p>You now know how to play RPS Arena!</p>
        <p class="tutorial-complete-subtext">Join a real lobby to compete for USDC prizes!</p>
        <button id="tutorial-complete-btn" class="btn btn-primary">Return to Lobby</button>
      </div>
    </div>
  </div>

  <!-- Match Result Screen -->
  <div id="result-screen" class="screen hidden">
    <div class="result-content">
      <h2 id="result-title">VICTORY!</h2>
      <p id="result-payout" class="payout">+2.4 USDC</p>
      <div id="final-standings" class="standings">
        <!-- Standings populated by JS -->
      </div>
      <button id="play-again-btn" class="btn btn-primary">Play Again</button>
      <button id="dev-reset-btn" class="btn btn-secondary hidden">Reset & Play (Dev)</button>
    </div>
  </div>

  <!-- Username Edit Modal -->
  <div id="username-modal" class="modal hidden">
    <div class="modal-content">
      <h3>Set Username</h3>
      <p>Choose a unique username (3-20 characters, letters, numbers, underscores only)</p>
      <input type="text" id="username-input" class="text-input" placeholder="Enter username" maxlength="20">
      <p id="username-error" class="error-text hidden"></p>
      <div class="modal-actions">
        <button id="save-username-btn" class="btn btn-primary">Save</button>
        <button id="cancel-username-btn" class="btn btn-secondary">Cancel</button>
      </div>
    </div>
  </div>

  <!-- Payment Modal -->
  <div id="payment-modal" class="modal hidden">
    <div class="modal-content">
      <h3>Join Lobby #<span id="join-lobby-id">-</span></h3>
      <p>Send exactly <strong>1 USDC</strong> to:</p>
      <div class="deposit-address">
        <code id="deposit-address">-</code>
        <button id="copy-address-btn" class="btn btn-small">Copy</button>
      </div>
      <p class="warning">Warning: Once sent, USDC is non-refundable unless the match doesn't start within 1 hour.</p>
      <div class="modal-actions">
        <button id="send-payment-btn" class="btn btn-primary">Send 1 USDC</button>
        <button id="cancel-join-btn" class="btn btn-secondary">Cancel</button>
      </div>
      <div id="payment-status" class="payment-status hidden">
        <span>Waiting for confirmation...</span>
      </div>
    </div>
  </div>

  <!-- Wallet Selection Modal -->
  <div id="wallet-modal" class="modal hidden">
    <div class="modal-content wallet-modal-content">
      <h3>Connect Wallet</h3>
      <p class="wallet-modal-subtitle">Choose your wallet</p>
      <div id="wallet-list" class="wallet-list">
        <!-- Wallets populated by JS via EIP-6963 -->
      </div>
      <div id="no-wallets-message" class="no-wallets-message hidden">
        <p>No wallets detected.</p>
        <p>Please install a Web3 wallet like <a href="https://metamask.io" target="_blank">MetaMask</a> or <a href="https://rabby.io" target="_blank">Rabby</a>.</p>
      </div>
      <button id="cancel-wallet-btn" class="btn btn-secondary">Cancel</button>
    </div>
  </div>

  <!-- How to Play Modal -->
  <div id="how-to-play-modal" class="modal hidden">
    <div class="modal-content how-to-play-modal-content">
      <button id="close-how-to-play-btn" class="modal-close-btn">&times;</button>
      <div class="how-to-play-modal-scroll">
        <h3>How to Play</h3>

        <!-- Interactive Tutorial Promo -->
        <div class="tutorial-promo-box">
          <div class="tutorial-promo-content">
            <strong>Learn by Doing!</strong>
            <p>Connect your wallet and try our free interactive tutorial to practice all game mechanics before playing for real.</p>
          </div>
        </div>

        <!-- Quick Start -->
        <section class="guide-section">
          <h4>Quick Start</h4>
          <div class="quick-start-steps">
            <div class="quick-step">
              <span class="step-number">1</span>
              <span class="step-text">Connect your wallet and pay 1 USDC to join a lobby</span>
            </div>
            <div class="quick-step">
              <span class="step-number">2</span>
              <span class="step-text">Wait for 3 players, then learn your role (Rock, Paper, or Scissors)</span>
            </div>
            <div class="quick-step">
              <span class="step-number">3</span>
              <span class="step-text">Move with WASD or Arrow Keys to chase or flee from opponents</span>
            </div>
            <div class="quick-step">
              <span class="step-number">4</span>
              <span class="step-text">Eliminate an opponent to trigger Showdown mode</span>
            </div>
            <div class="quick-step">
              <span class="step-number">5</span>
              <span class="step-text">Collect 2 hearts before your rival to win 2.4 USDC!</span>
            </div>
          </div>
        </section>

        <!-- Movement Controls -->
        <section class="guide-section">
          <h4>Movement Controls</h4>
          <div class="controls-grid">
            <div class="control-option">
              <div class="key-group">
                <span class="key">W</span>
                <div class="key-row">
                  <span class="key">A</span>
                  <span class="key">S</span>
                  <span class="key">D</span>
                </div>
              </div>
              <span class="control-label">WASD Keys</span>
            </div>
            <div class="control-divider">or</div>
            <div class="control-option">
              <div class="key-group">
                <span class="key arrow-key">‚Üë</span>
                <div class="key-row">
                  <span class="key arrow-key">‚Üê</span>
                  <span class="key arrow-key">‚Üì</span>
                  <span class="key arrow-key">‚Üí</span>
                </div>
              </div>
              <span class="control-label">Arrow Keys</span>
            </div>
          </div>
          <ul class="guide-list">
            <li>Move in any direction including diagonals</li>
            <li>All players move at the same speed</li>
            <li>You cannot leave the arena boundaries</li>
          </ul>
        </section>

        <!-- Rock Paper Scissors Rules -->
        <section class="guide-section">
          <h4>Rock Paper Scissors Combat</h4>
          <p class="guide-intro">Each match, you're assigned one of three roles. Players are color-coded in the arena. To eliminate an opponent, <strong>run directly into them with your player</strong> - if your role beats theirs, they're instantly eliminated!</p>
          <div class="rps-rules">
            <div class="rps-rule">
              <div class="rps-matchup">
                <span class="role-badge rock">Rock (Orange)</span>
                <span class="beats-arrow">beats</span>
                <span class="role-badge scissors">Scissors (Green)</span>
              </div>
            </div>
            <div class="rps-rule">
              <div class="rps-matchup">
                <span class="role-badge scissors">Scissors (Green)</span>
                <span class="beats-arrow">beats</span>
                <span class="role-badge paper">Paper (Blue)</span>
              </div>
            </div>
            <div class="rps-rule">
              <div class="rps-matchup">
                <span class="role-badge paper">Paper (Blue)</span>
                <span class="beats-arrow">beats</span>
                <span class="role-badge rock">Rock (Orange)</span>
              </div>
            </div>
          </div>
          <div class="combat-tips">
            <div class="tip">
              <span class="tip-icon attack">‚öî</span>
              <span><strong>Attack</strong> the role you beat for an instant elimination</span>
            </div>
            <div class="tip">
              <span class="tip-icon avoid">üõ°</span>
              <span><strong>Avoid</strong> the role that beats you or you'll be eliminated</span>
            </div>
          </div>
        </section>

        <!-- Showdown Mode -->
        <section class="guide-section showdown-section">
          <h4>Showdown Mode</h4>
          <div class="showdown-badge">Final 2 Players</div>
          <p class="guide-intro">When only 2 players remain, the game transitions to Showdown Mode!</p>
          <div class="showdown-details">
            <div class="showdown-step">
              <span class="showdown-icon">‚è∏</span>
              <div>
                <strong>3-Second Freeze</strong>
                <p>Both players freeze while "SHOWDOWN" appears on screen</p>
              </div>
            </div>
            <div class="showdown-step">
              <span class="showdown-icon">üíó</span>
              <div>
                <strong>Hearts Spawn</strong>
                <p>3 hearts appear at random positions in the arena</p>
              </div>
            </div>
            <div class="showdown-step">
              <span class="showdown-icon">üèÉ</span>
              <div>
                <strong>Race to Collect</strong>
                <p><strong>Move your player directly into the hearts</strong> to collect them - first player to collect <strong>2 hearts</strong> wins the match!</p>
              </div>
            </div>
          </div>
          <div class="showdown-note">
            <strong>Note:</strong> In Showdown Mode, collisions between players only cause a bounce - no eliminations!
          </div>
        </section>

        <!-- Game Objectives -->
        <section class="guide-section">
          <h4>How to Win</h4>
          <div class="win-conditions">
            <div class="win-condition">
              <div class="win-header">
                <span class="win-icon">üëë</span>
                <span class="win-title">Standard Victory</span>
              </div>
              <p>Be the last player standing by running into opponents whose role you beat to eliminate them</p>
            </div>
            <div class="win-condition">
              <div class="win-header">
                <span class="win-icon">üíó</span>
                <span class="win-title">Showdown Victory</span>
              </div>
              <p>If 2 players remain, race to collect hearts by running into them - first to collect 2 of the 3 hearts wins!</p>
            </div>
          </div>
        </section>

        <!-- Match Flow -->
        <section class="guide-section">
          <h4>Match Flow</h4>
          <div class="match-flow">
            <div class="flow-step">
              <div class="flow-number">1</div>
              <div class="flow-content">
                <strong>Join a Lobby</strong>
                <p>Pay 1 USDC to enter. Wait for 3 players total.</p>
              </div>
            </div>
            <div class="flow-arrow">‚Üí</div>
            <div class="flow-step">
              <div class="flow-number">2</div>
              <div class="flow-content">
                <strong>10-Second Countdown</strong>
                <p>Learn your role and see who to attack/avoid.</p>
              </div>
            </div>
            <div class="flow-arrow">‚Üí</div>
            <div class="flow-step">
              <div class="flow-number">3</div>
              <div class="flow-content">
                <strong>3-Second Preview</strong>
                <p>See player positions before the action begins.</p>
              </div>
            </div>
            <div class="flow-arrow">‚Üí</div>
            <div class="flow-step">
              <div class="flow-number">4</div>
              <div class="flow-content">
                <strong>Battle Phase</strong>
                <p>Chase your target, flee from your threat!</p>
              </div>
            </div>
            <div class="flow-arrow">‚Üí</div>
            <div class="flow-step">
              <div class="flow-number">5</div>
              <div class="flow-content">
                <strong>Showdown / Victory</strong>
                <p>Eliminate all or race for hearts to win!</p>
              </div>
            </div>
          </div>
        </section>

        <!-- Economy -->
        <section class="guide-section">
          <h4>Entry Fee & Prizes</h4>
          <div class="economy-table">
            <div class="economy-row">
              <span class="economy-label">Entry Fee</span>
              <span class="economy-value">1 USDC</span>
            </div>
            <div class="economy-row">
              <span class="economy-label">Prize Pool</span>
              <span class="economy-value">3 USDC (from 3 players)</span>
            </div>
            <div class="economy-row highlight">
              <span class="economy-label">Winner Payout</span>
              <span class="economy-value success">2.4 USDC</span>
            </div>
            <div class="economy-row">
              <span class="economy-label">Platform Fee</span>
              <span class="economy-value">0.6 USDC (20%)</span>
            </div>
          </div>
          <p class="economy-note">If a lobby doesn't fill within 30 minutes, you can request a full refund of your 1 USDC.</p>
        </section>

        <!-- Tips & Strategy -->
        <section class="guide-section">
          <h4>Tips & Strategy</h4>
          <div class="tips-grid">
            <div class="strategy-tip">
              <span class="strategy-icon">üéØ</span>
              <div>
                <strong>Know Your Matchups</strong>
                <p>During the countdown, memorize who you beat and who beats you.</p>
              </div>
            </div>
            <div class="strategy-tip">
              <span class="strategy-icon">‚è±</span>
              <div>
                <strong>Be Patient</strong>
                <p>Sometimes waiting for the right moment is better than rushing in.</p>
              </div>
            </div>
            <div class="strategy-tip">
              <span class="strategy-icon">üëÄ</span>
              <div>
                <strong>Watch All Players</strong>
                <p>Track your threat's position even while chasing your target.</p>
              </div>
            </div>
            <div class="strategy-tip">
              <span class="strategy-icon">üíó</span>
              <div>
                <strong>Showdown Positioning</strong>
                <p>In Showdown, position yourself near multiple hearts at once.</p>
              </div>
            </div>
            <div class="strategy-tip">
              <span class="strategy-icon">üö´</span>
              <div>
                <strong>Don't Disconnect</strong>
                <p>Stay connected! Disconnecting for 30+ seconds eliminates you.</p>
              </div>
            </div>
          </div>
        </section>

        <!-- FAQ -->
        <section class="guide-section">
          <h4>Frequently Asked Questions</h4>
          <div class="faq-list">
            <div class="faq-item">
              <div class="faq-question">Can I get a refund if I join a lobby?</div>
              <div class="faq-answer">Yes, but only if the match doesn't start within 30 minutes. Once a match begins, there are no refunds.</div>
            </div>
            <div class="faq-item">
              <div class="faq-question">What if I disconnect during a match?</div>
              <div class="faq-answer">You have 30 seconds to reconnect. If you don't return in time, you'll be automatically eliminated.</div>
            </div>
            <div class="faq-item">
              <div class="faq-question">How are roles assigned?</div>
              <div class="faq-answer">Roles are randomly assigned at the start of each match. Everyone has an equal chance of being Rock, Paper, or Scissors.</div>
            </div>
            <div class="faq-item">
              <div class="faq-question">Is there a maximum number of matches I can play?</div>
              <div class="faq-answer">No! Play as many matches as you want. Just join any available lobby.</div>
            </div>
          </div>
        </section>

      </div>
    </div>
  </div>

  <!-- Global Confetti Canvas (for victory celebration) -->
  <canvas id="confetti-canvas"></canvas>

  <!-- Footer -->
  <footer class="site-footer">
    <div class="footer-content">
      <span class="footer-copyright">&copy; 2026 RPS Arena. All rights reserved.</span>
      <nav class="footer-links">
        <a href="docs.html">Documentation</a>
        <a href="privacy.html">Privacy Policy</a>
        <a href="terms.html">Terms of Service</a>
      </nav>
    </div>
  </footer>

  <!-- Scripts -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/ethers/6.11.0/ethers.umd.min.js"></script>
  <script src="src/wallet.js"></script>
  <script src="src/network.js"></script>
  <script src="src/input.js"></script>
  <script src="src/interpolation.js"></script>
  <script src="src/renderer.js"></script>
  <script src="src/confetti.js"></script>
  <script src="src/lobbyBackground.js"></script>
  <script src="src/tutorial.js"></script>
  <script src="src/ui.js"></script>
  <script src="src/main.js"></script>
</body>
</html>
